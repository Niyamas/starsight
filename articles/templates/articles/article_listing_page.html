{% extends 'starsight/base.html' %}
{% load wagtailimages_tags static %}


{% block extra_css %}

<link rel="stylesheet" href="{% static 'articles/css/articles.css' %}">

{% endblock extra_css %}


{% block head_js %}

<link rel="preload" as="script" href="{% static 'articles/js/articles.js' %}">

{% endblock head_js %}


{% block content %}

<h1>article listing page</h1>

<ul class="topics">

    {% for topic in topics %}

        <li class="topics__topic topics__topic--{{ forloop.counter }}">{{ topic.name }}</li>

    {% endfor %}

</ul>


<div class="listings">

    <article class="article">

        <a href="#">
            <img class="article__img" src="{% static 'home/images/aperture-vintage-SshYpuf607g-unsplash.jpg' %}" alt="">
        </a>

        <div class="article__content">
            <h2 class="article__content__title"><a href="#">Beautiful View in the Sky</a></h2>

            <a class="article__content__topic" href="#">STARS</a>
            <span class="article__content__date">December 30, 2020</span>

            <p class="article__content__text" href="#">Constellations hold symbols of the universe through the lens of humanity.</p>
        </div>

    </article>



</div>


{% comment %} <ul>

    {% for topic in topics %}

        <li><a href="?topic={{ topic.slug }}">{{ topic.name }}</a></li>
        
    {% endfor %}

</ul>

<h1>{{ topic_slug }}</h1>

{% if articles %}

    <div class="container">

        {% for article in articles %}

            <div class="row">
                <div class="col-sm-3">

                    {% image article.image fill-250x250 as article_img %}

                    <a href="{{ article.url }}">
                        <img src="{{ article_img.url }}" alt="{{ article_img.alt }}">
                    </a>
                </div>

                <div class="col-sm-9">
                    <a href="{{ article.url }}">
                        {{ article.title }}
                    </a>

                    {% if article.specific.strange_quote %}
                        <p>{{ article.specific.strange_quote }}</p>
                    {% endif %}
                </div>

            </div>
            <br>

        {% endfor %}

    </div>



    <div class="container">
        <div class="row">
            <div class="col-lg-12">

                {% if articles.paginator.num_pages > 1 %}
                
                    <div class="pagination">

                        {% if articles.has_previous %}

                            <li class="page-item">
                                <a class="page-link" href="{% if topic_slug %}?topic={{ topic_slug }}&page={{ articles.previous_page_number }}{% else %}?page={{ articles.previous_page_number }}{% endif %}">
                                    <span>&laquo;</span>
                                </a>
                            </li>

                        {% endif %}

                        {% for page_num in articles.paginator.page_range %}
                        
                            <li class="page-item {% if page_num == articles.number %}active{% endif %}">
                                <a class="page-link" href="{% if topic_slug %}?topic={{ topic_slug }}&page={{ page_num }}{% else %}?page={{ page_num }}{% endif %}">
                                    {{ page_num }}
                                </a>
                            </li>                    
                        
                        {% endfor %}



                        {% if articles.has_next %}

                            <li class="page-item">
                                <a class="page-link" href="{% if topic_slug %}?topic={{ topic_slug }}&page={{ articles.next_page_number }}{% else %}?page={{ articles.next_page_number }}{% endif %}">
                                    <span>&raquo;</span>
                                </a>
                            </li>        
                        
                        {% endif %}

                    </div>
                
                {% endif %}


            </div>
        </div>
    </div>

{% else %}

    <h1>No articles for this topic</h1>

{% endif %} {% endcomment %}




{% endblock content %}


{% block extra_js %}

<script defer type="text/javascript" src="{% static 'articles/js/articles.js' %}"></script>

{% endblock extra_js %}